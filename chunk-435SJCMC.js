import{a as I}from"./chunk-NRYJNN4X.js";import{a as P}from"./chunk-KWL7FBH7.js";import{d as q,e as G,f as H,m as j,n as O}from"./chunk-HLRV67NH.js";import"./chunk-CI7YBOYE.js";import{e as T}from"./chunk-LG62RP5S.js";import{c as E,e as B,f as M,u as k}from"./chunk-CTDPX7HU.js";import{$a as c,Aa as d,Ba as g,Ma as u,Oa as _,Qa as f,Ra as V,Sa as N,Ta as D,Ua as a,Va as l,W as b,Wa as h,Za as x,_a as p,ab as R,bb as U,cb as A,ea as v,eb as r,fa as C,fb as F,ib as Q,ka as $,kb as y,lb as L,mb as w,va as S}from"./chunk-BBJBHRII.js";import{d as W}from"./chunk-4CLCTAJ7.js";var ie=t=>({show:t}),ne=()=>({display:"block"}),le=()=>({"padding-left":"0px"});function oe(t,s){t&1&&(a(0,"p",9),r(1,"Loading"),l())}function ae(t,s){if(t&1){let i=x();a(0,"button",21),p("click",function(){v(i);let n=c(3);return C(n.clearFile())}),r(1,"x"),l()}}function re(t,s){if(t&1){let i=x();a(0,"div",12)(1,"div",13)(2,"label",14),r(3,"Image"),l(),a(4,"div",18)(5,"input",19,0),p("change",function(n){v(i);let e=c(2);return C(e.onFileSelected(n))}),l(),u(7,ae,2,0,"button",20),l()()()}if(t&2){let i=c(2);d(7),f(i.selectedFile?7:-1)}}function se(t,s){if(t&1&&(a(0,"div",22)(1,"div",23)(2,"label",14),r(3,"File Preview"),l(),a(4,"div",24),h(5,"img",25),l()()(),a(6,"div",22)(7,"div",13)(8,"label",14),r(9,"File Name"),l(),h(10,"input",26),l(),a(11,"div",13)(12,"label",14),r(13,"File Size"),l(),h(14,"input",26),l(),a(15,"div",13)(16,"label",14),r(17,"File Type"),l(),h(18,"input",26),l(),a(19,"div",13)(20,"label",14),r(21,"File Extension"),l(),h(22,"input",26),l()()),t&2){let i=c(2);d(5),_("src",i.file.url,S),d(5),_("value",i.file==null?null:i.file.name),d(4),_("value",i.file==null?null:i.file.size),d(4),_("value",i.file==null?null:i.file.type),d(4),_("value",i.file==null?null:i.file.extension)}}function de(t,s){if(t&1){let i=x();a(0,"div",10),u(1,re,8,1,"div",12),a(2,"div",12)(3,"div",13)(4,"label",14),r(5,"File Name"),l(),a(6,"input",15),p("input",function(n){v(i);let e=c();return C(e.setFileName(n.target.value))}),l()()(),u(7,se,23,5),a(8,"div",16)(9,"button",17),r(10),l()()()}if(t&2){let i=c();d(),f(i.is_edit?-1:1),d(5),_("value",i.filename),d(),f(i.file.url?7:-1),d(3),F(i.is_edit?"Update":"Upload")}}function me(t,s){t&1&&h(0,"div",11)}var z=(()=>{let s=class s{constructor(o,n,e,m){this.notification=o,this.myFormService=n,this.lang=e,this.service=m,this.getFiles=new $,this.loader=!1,this.modal=!1,this.is_edit=!1,this.file={},this.selectedFile=null,this.filename=""}handleModal(){this.modal=!this.modal,this.modal==!1&&(this.is_edit=!1,this.clearFile())}clearFile(){this.loader=!0,this.selectedFile=null,this.filename=null,this.file={},this.loader=!1}onFileSelected(o){let n=o.target;if(n.files&&n.files.length>0){this.selectedFile=n.files[0];let e=new FileReader;e.onload=m=>{n.value="",this.file={name:this.selectedFile?.name,size:this.selectedFile?.size,type:this.selectedFile?.type,extension:this.selectedFile?.name?.split(".")?.pop(),url:e.result},this.setFileName(this.file.name)},e.readAsDataURL(this.selectedFile)}}setFileName(o){this.filename=o}onSubmit(){return W(this,null,function*(){if(!this.is_edit)if(this.selectedFile){let o=new FormData;o.append("filename",this.filename),o.append("file",this.selectedFile,this.selectedFile.name),this.loader=!0,this.service.create(o).subscribe({next:n=>{this.notification.success(n.message),this.loader=!1,this.selectedFile=null,this.filename=null,this.file={},this.modal=!1,this.getFiles.emit()},error:n=>{let e=n.error;e?e.errors?this.notification.error(Object.values(e.errors)[0]):this.notification.error(e.message):this.notification.error("Something Went Wrong"),this.loader=!1}})}else this.notification.error("File Not Found");if(this.is_edit){let o={id:this.file.id,name:this.filename};this.service.update(o).subscribe({next:n=>{this.notification.success(n.message),this.loader=!1,this.selectedFile=null,this.filename=null,this.file={},this.modal=!1,this.getFiles.emit()},error:n=>{let e=n.error;e?e.errors?this.notification.error(Object.values(e.errors)[0]):this.notification.error(e.message):this.notification.error("Something Went Wrong"),this.loader=!1}})}})}};s.\u0275fac=function(n){return new(n||s)(g(k),g(I),g(T),g(P))},s.\u0275cmp=b({type:s,selectors:[["app-file-modal"]],outputs:{getFiles:"getFiles"},standalone:!0,features:[y],decls:12,vars:8,consts:[["inputfield",""],["tabindex","-1","aria-labelledby","myLargeModalLabel","aria-modal","true","role","dialog",1,"modal","bs-example-modal-lg",3,"ngClass","ngStyle"],[1,"modal-dialog","modal-xl"],[1,"modal-content"],[1,"modal-header"],["id","myLargeModalLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-hidden","true",1,"btn-close",3,"click"],[1,"modal-body"],["enctype","multipart/form-data",3,"ngSubmit"],[1,"text-center"],[1,"row"],[1,"modal-backdrop","show"],[1,"col-md-12"],[1,"form-group"],[1,"form-label"],[1,"form-control",3,"input","value"],[1,"col-md-12","text-center"],["type","submit",1,"btn","btn-info","text-white"],[1,"d-flex"],["placeholder","Image","type","file",1,"form-control",3,"change"],[1,"btn","btn-danger"],[1,"btn","btn-danger",3,"click"],[1,"col-md-6"],[1,"col-md-12","pb-3"],[1,"img_holder"],[1,"w-100",3,"src"],["readonly","",1,"form-control",3,"value"]],template:function(n,e){n&1&&(a(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"h4",5),r(5,"Filemanager"),l(),a(6,"button",6),p("click",function(){return e.handleModal()}),l()(),a(7,"div",7)(8,"form",8),p("ngSubmit",function(){return e.onSubmit()}),u(9,oe,2,0,"p",9)(10,de,11,4,"div",10),l()()()()(),u(11,me,1,0,"div",11)),n&2&&(_("ngClass",w(4,ie,e.modal))("ngStyle",e.modal?L(6,ne):L(7,le)),d(9),f(e.loader?9:10),d(2),f(e.modal?11:-1))},dependencies:[M,E,B,O,H,q,j,G],encapsulation:2});let t=s;return t})();var ce=t=>({active:t});function pe(t,s){t&1&&(a(0,"p",21),r(1,"Loading"),l())}function ue(t,s){if(t&1&&h(0,"img",27),t&2){let i=c().$implicit;_("src",i.link,S)}}function _e(t,s){t&1&&r(0," No Preview ")}function fe(t,s){if(t&1){let i=x();a(0,"tr")(1,"td",21),r(2),l(),a(3,"td",21),u(4,ue,1,1,"img",27)(5,_e,1,0),l(),a(6,"td",21)(7,"a"),r(8),l()(),a(9,"td",21),r(10),l(),a(11,"td",21)(12,"div",28)(13,"a",29),p("click",function(){let n=v(i).$implicit,e=c(3);return C(e.onEdit(n))}),h(14,"i",30),l(),a(15,"a",31),p("click",function(){let n=v(i).$implicit,e=c(3);return C(e.delete(n.id))}),h(16,"i",32),l()()()()}if(t&2){let i=s.$implicit;d(2),F(i.id),d(2),f(i.extension=="jpg"||i.extension=="png"||i.extension=="jpeg"?4:5),d(4),F(i.name),d(2),F(i.extension)}}function he(t,s){if(t&1&&N(0,fe,17,4,"tr",null,V),t&2){let i=c(2);D(i.dataSource.data)}}function ge(t,s){if(t&1){let i=x();a(0,"li",33)(1,"button",34),p("click",function(){let n=v(i).$implicit,e=c(3);return C(e.handlePage(n))}),r(2),l()()}if(t&2){let i=s.$implicit,o=c(3);d(),_("ngClass",w(2,ce,i==o.options.page)),d(),F(i)}}function ve(t,s){if(t&1&&N(0,ge,3,4,"li",33,V),t&2){let i=c(2);D(i.dataSource==null?null:i.dataSource.links)}}function Ce(t,s){if(t&1&&(a(0,"div",22)(1,"table",23)(2,"thead",24)(3,"tr")(4,"th",21),r(5,"#"),l(),a(6,"th",21),r(7,"Image"),l(),a(8,"th",21),r(9,"Title"),l(),a(10,"th",21),r(11,"Extension"),l(),a(12,"th",21),r(13,"Action"),l()()(),a(14,"tbody",24),u(15,he,2,0),l()(),a(16,"div",25)(17,"ul",26),u(18,ve,2,0),l()()()),t&2){let i=c();d(15),f(i.dataSource?15:-1),d(3),f(i.dataSource.links?18:-1)}}var Oe=(()=>{let s=class s{constructor(o,n,e,m){this.notification=o,this.myFormService=n,this.lang=e,this.service=m,this.search="",this.fileDropdown=!1,this.loader=!1,this.files=[],this.dataSource={},this.options={type:"",page:1,limit:10,search:""}}ngOnInit(){this.getFiles()}handleSearch(o){let n=o.target.value;this.options.search=n,this.getFiles()}getFiles(){this.loader=!0,this.service.list(this.options).subscribe({next:o=>{this.dataSource=o.data,this.loader=!1},error:o=>{this.loader=!1}})}handlePage(o){this.options.page=o,this.getFiles()}handle_fileDropdown(){this.fileDropdown=!this.fileDropdown}delete(o){this.service.delete(o).subscribe({next:n=>{this.notification.success(n.message),this.loader=!1,this.getFiles()},error:n=>{let e=n.error;e?e.errors?this.notification.error(Object.values(e.errors)[0]):this.notification.error(e.message):this.notification.error("Something Went Wrong"),this.loader=!1}})}onEdit(o){this.FileModalComponent.modal=!0,this.FileModalComponent.is_edit=!0,this.FileModalComponent.filename=o.name,this.FileModalComponent.file={name:o.name,size:o.size,extension:o.extension,type:o.type,url:o.link,id:o.id}}};s.\u0275fac=function(n){return new(n||s)(g(k),g(I),g(T),g(P))},s.\u0275cmp=b({type:s,selectors:[["app-filemanager"]],viewQuery:function(n,e){if(n&1&&R(z,5),n&2){let m;U(m=A())&&(e.FileModalComponent=m.first)}},standalone:!0,features:[y],decls:30,vars:4,consts:[[1,"row","page-titles"],[1,"col-md-5","align-self-center"],[1,"text-themecolor"],[1,"col-md-7","align-self-center","text-end"],[1,"d-flex","justify-content-end","align-items-center"],[1,"breadcrumb","justify-content-end"],[1,"breadcrumb-item"],["href","javascript:void(0)"],[1,"breadcrumb-item","active"],[3,"getFiles"],[1,"row"],[1,"col-lg-12"],[1,"card"],[1,"card-header","bg-info","d-flex","justify-content-between","justify-content-center","align-items-center"],[1,"mb-0","text-white"],[1,"btn","btn-primary",3,"click"],[1,"card-body","p-4"],[1,"d-flex","justify-content-between","pb-3"],[1,"text-end"],[1,"d-flex","justify-content-center","align-items-center"],["id","search","placeholder","Search",1,"form-control",3,"keypress"],[1,"text-center"],[1,"table-responsive"],[1,"table","border","table-striped"],[1,"text-nowrap","text-truncate"],["id","example23_paginate",1,"dataTables_paginate","paging_simple_numbers","pt-3"],[1,"pagination",2,"justify-content","center"],[2,"width","50px","height","50px",3,"src"],[1,"bt-group"],["title","Edit",1,"btn","btn-info","text-white",3,"click"],[1,"icon","mdi","mdi-grease-pencil"],["title","Delete",1,"btn","btn-danger","text-white",3,"click"],[1,"icon","mdi","mdi-delete"],[1,"paginate_button","page-item"],[1,"page-link",3,"click","ngClass"]],template:function(n,e){if(n&1&&(a(0,"div",0)(1,"div",1)(2,"h4",2),r(3,"Filemanager"),l()(),a(4,"div",3)(5,"div",4)(6,"ol",5)(7,"li",6)(8,"a",7),r(9,"Admin"),l()(),a(10,"li",8),r(11,"Filemanager"),l()()()()(),a(12,"app-file-modal",9),p("getFiles",function(){return e.getFiles()}),l(),a(13,"div",10)(14,"div",11)(15,"div",12)(16,"div",13)(17,"h4",14),r(18,"Filemanager"),l(),a(19,"a",15),p("click",function(){return e.FileModalComponent.modal=!0}),r(20,"Add New"),l()(),a(21,"div",16)(22,"div",17)(23,"div",18)(24,"p"),r(25),l()(),a(26,"div",19)(27,"input",20),p("keypress",function(J){return e.handleSearch(J)}),l()()(),u(28,pe,2,0,"p",21)(29,Ce,19,2,"div",22),l()()()()),n&2){let m;d(25),Q("Showing ",(m=e.dataSource==null?null:e.dataSource.from)!==null&&m!==void 0?m:0," to ",(m=e.dataSource==null?null:e.dataSource.to)!==null&&m!==void 0?m:0," of ",(m=e.dataSource==null?null:e.dataSource.total)!==null&&m!==void 0?m:0," entries"),d(3),f(e.loader==!0?28:29)}},dependencies:[M,E,O,j,z],styles:[".img_holder[_ngcontent-%COMP%]{height:200px;width:200px}.dropdown[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{right:0}.el-overlay-1[_ngcontent-%COMP%]{position:relative}.el-overlay-1[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:250px}.el-overlay[_ngcontent-%COMP%]{width:100%;height:100%;position:absolute;overflow:hidden;top:0;left:0;opacity:0;background-color:#000000b3;-webkit-transition:all .4s ease-in-out;transition:all .4s ease-in-out}.el-overlay[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{color:#fff;list-style:none;height:100%;display:flex;align-items:center;justify-content:center;padding:0;margin:0}.el-overlay[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff}.el-card-avatar[_ngcontent-%COMP%]:hover   .el-overlay[_ngcontent-%COMP%]{opacity:1}",`.paginate_button[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{
      background-color: #03a9f3;
      color: white;
    }`]});let t=s;return t})();export{Oe as FilemanagerComponent};
