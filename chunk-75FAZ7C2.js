import{a as P}from"./chunk-OCMIB5ZM.js";import{a as O}from"./chunk-56Y42CFZ.js";import{d as G,e as H,f as J,m as V,n as j}from"./chunk-4NJHKZKE.js";import"./chunk-XJQRYUSR.js";import{e as k}from"./chunk-IACLDSZE.js";import{c as E,f as B,h as M,v as q,x as T}from"./chunk-J2EGX742.js";import{$a as I,Fa as S,Ka as s,La as x,W as b,Wa as _,Ya as u,_a as m,ab as N,bb as D,cb as a,db as o,ea as h,eb as f,fa as C,hb as v,ib as p,jb as c,ka as W,kb as $,lb as R,mb as A,ob as d,pb as F,sb as Q,vb as y,wb as L,xb as w}from"./chunk-PQVSAWMG.js";import{d as U}from"./chunk-4CLCTAJ7.js";var ie=i=>({show:i}),ne=()=>({display:"block"}),oe=()=>({"padding-left":"0px"});function le(i,r){i&1&&(a(0,"p",9),d(1,"Loading"),o())}function ae(i,r){if(i&1){let e=v();a(0,"button",21),p("click",function(){h(e);let n=c(3);return C(n.clearFile())}),d(1,"x"),o()}}function re(i,r){if(i&1){let e=v();a(0,"div",12)(1,"div",13)(2,"label",14),d(3,"Image"),o(),a(4,"div",18)(5,"input",19,0),p("change",function(n){h(e);let l=c(2);return C(l.onFileSelected(n))}),o(),_(7,ae,2,0,"button",20),o()()()}if(i&2){let e=c(2);s(7),m(e.selectedFile?7:-1)}}function de(i,r){if(i&1&&(a(0,"div",22)(1,"div",23)(2,"label",14),d(3,"File Preview"),o(),a(4,"div",24),f(5,"img",25),o()()(),a(6,"div",22)(7,"div",13)(8,"label",14),d(9,"File Name"),o(),f(10,"input",26),o(),a(11,"div",13)(12,"label",14),d(13,"File Size"),o(),f(14,"input",26),o(),a(15,"div",13)(16,"label",14),d(17,"File Type"),o(),f(18,"input",26),o(),a(19,"div",13)(20,"label",14),d(21,"File Extension"),o(),f(22,"input",26),o()()),i&2){let e=c(2);s(5),u("src",e.file.url,S),s(5),u("value",e.file==null?null:e.file.name),s(4),u("value",e.file==null?null:e.file.size),s(4),u("value",e.file==null?null:e.file.type),s(4),u("value",e.file==null?null:e.file.extension)}}function se(i,r){if(i&1){let e=v();a(0,"div",10),_(1,re,8,1,"div",12),a(2,"div",12)(3,"div",13)(4,"label",14),d(5,"File Name"),o(),a(6,"input",15),p("input",function(n){h(e);let l=c();return C(l.setFileName(n.target.value))}),o()()(),_(7,de,23,5),a(8,"div",16)(9,"button",17),d(10),o()()()}if(i&2){let e=c();s(),m(e.is_edit?-1:1),s(5),u("value",e.filename),s(),m(e.file.url?7:-1),s(3),F(e.is_edit?"Update":"Upload")}}function ce(i,r){i&1&&f(0,"div",11)}var z=(()=>{let r=class r{constructor(t,n,l,g){this.notification=t,this.myFormService=n,this.lang=l,this.service=g,this.getFiles=new W,this.loader=!1,this.modal=!1,this.is_edit=!1,this.file={},this.selectedFile=null,this.filename=""}handleModal(){this.modal=!this.modal,this.modal==!1&&(this.is_edit=!1,this.clearFile())}clearFile(){this.loader=!0,this.selectedFile=null,this.filename=null,this.file={},this.loader=!1}onFileSelected(t){let n=t.target;if(n.files&&n.files.length>0){this.selectedFile=n.files[0];let l=new FileReader;l.onload=g=>{n.value="",this.file={name:this.selectedFile?.name,size:this.selectedFile?.size,type:this.selectedFile?.type,extension:this.selectedFile?.name?.split(".")?.pop(),url:l.result},this.setFileName(this.file.name)},l.readAsDataURL(this.selectedFile)}}setFileName(t){this.filename=t}onSubmit(){return U(this,null,function*(){if(!this.is_edit)if(this.selectedFile){let t=new FormData;t.append("filename",this.filename),t.append("file",this.selectedFile,this.selectedFile.name),this.loader=!0,this.service.create(t).subscribe({next:n=>{this.notification.success(n.message),this.loader=!1,this.selectedFile=null,this.filename=null,this.file={},this.modal=!1,this.getFiles.emit()},error:n=>{let l=n.error;l?l.errors?this.notification.error(Object.values(l.errors)[0]):this.notification.error(l.message):this.notification.error("Something Went Wrong"),this.loader=!1}})}else this.notification.error("File Not Found");if(this.is_edit){let t={id:this.file.id,name:this.filename};this.service.update(t).subscribe({next:n=>{this.notification.success(n.message),this.loader=!1,this.selectedFile=null,this.filename=null,this.file={},this.modal=!1,this.getFiles.emit()},error:n=>{let l=n.error;l?l.errors?this.notification.error(Object.values(l.errors)[0]):this.notification.error(l.message):this.notification.error("Something Went Wrong"),this.loader=!1}})}})}};r.\u0275fac=function(n){return new(n||r)(x(T),x(P),x(k),x(O))},r.\u0275cmp=b({type:r,selectors:[["app-file-modal"]],outputs:{getFiles:"getFiles"},standalone:!0,features:[y],decls:12,vars:8,consts:[["inputfield",""],["tabindex","-1","aria-labelledby","myLargeModalLabel","aria-modal","true","role","dialog",1,"modal","bs-example-modal-lg",3,"ngClass","ngStyle"],[1,"modal-dialog","modal-xl"],[1,"modal-content"],[1,"modal-header"],["id","myLargeModalLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-hidden","true",1,"btn-close",3,"click"],[1,"modal-body"],["enctype","multipart/form-data",3,"ngSubmit"],[1,"text-center"],[1,"row"],[1,"modal-backdrop","show"],[1,"col-md-12"],[1,"form-group"],[1,"form-label"],[1,"form-control",3,"input","value"],[1,"col-md-12","text-center"],["type","submit",1,"btn","btn-info","text-white"],[1,"d-flex"],["placeholder","Image","type","file",1,"form-control",3,"change"],[1,"btn","btn-danger"],[1,"btn","btn-danger",3,"click"],[1,"col-md-6"],[1,"col-md-12","pb-3"],[1,"img_holder"],[1,"w-100",3,"src"],["readonly","",1,"form-control",3,"value"]],template:function(n,l){n&1&&(a(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"h4",5),d(5,"Filemanager"),o(),a(6,"button",6),p("click",function(){return l.handleModal()}),o()(),a(7,"div",7)(8,"form",8),p("ngSubmit",function(){return l.onSubmit()}),_(9,le,2,0,"p",9)(10,se,11,4,"div",10),o()()()()(),_(11,ce,1,0,"div",11)),n&2&&(u("ngClass",w(4,ie,l.modal))("ngStyle",l.modal?L(6,ne):L(7,oe)),s(9),m(l.loader?9:10),s(2),m(l.modal?11:-1))},dependencies:[M,E,B,j,J,G,V,H],encapsulation:2});let i=r;return i})();var me=i=>({active:i});function _e(i,r){if(i&1){let e=v();a(0,"a",17),p("click",function(){h(e);let n=c();return C(n.FileModalComponent.modal=!0)}),d(1,"Add New"),o()}}function pe(i,r){i&1&&(a(0,"p",22),d(1,"Loading"),o())}function ue(i,r){if(i&1&&f(0,"img",28),i&2){let e=c().$implicit,t=c(4);u("src",t.apiUrl+"/"+e.path,S)}}function fe(i,r){i&1&&d(0," No Preview ")}function ge(i,r){if(i&1){let e=v();a(0,"a",32),p("click",function(){h(e);let n=c().$implicit,l=c(4);return C(l.onEdit(n))}),f(1,"i",33),o()}}function he(i,r){if(i&1){let e=v();a(0,"a",34),p("click",function(){h(e);let n=c().$implicit,l=c(4);return C(l.delete(n.id))}),f(1,"i",35),o()}}function Ce(i,r){if(i&1&&(a(0,"tr")(1,"td",22),d(2),o(),a(3,"td",22),_(4,ue,1,1,"img",28)(5,fe,1,0),o(),a(6,"td",22)(7,"a"),d(8),o()(),a(9,"td",22),d(10),o(),a(11,"td",22)(12,"div",29),_(13,ge,2,0,"a",30)(14,he,2,0,"a",31),o()()()),i&2){let e=r.$implicit,t=c(4);s(2),F(e.id),s(2),m(e.extension=="jpg"||e.extension=="png"||e.extension=="jpeg"?4:5),s(4),F(e.name),s(2),F(e.extension),s(3),m(t.service.adminService.p.includes("filemanger.edit")?13:-1),s(),m(t.service.adminService.p.includes("filemanager.delete")?14:-1)}}function xe(i,r){if(i&1&&N(0,Ce,15,6,"tr",null,I),i&2){let e=c(3);D(e.dataSource.data)}}function ve(i,r){if(i&1){let e=v();a(0,"li",36)(1,"button",37),p("click",function(){let n=h(e).$implicit,l=c(4);return C(l.handlePage(n))}),d(2),o()()}if(i&2){let e=r.$implicit,t=c(4);s(),u("ngClass",w(2,me,e==t.options.page)),s(),F(e)}}function Fe(i,r){if(i&1&&N(0,ve,3,4,"li",36,I),i&2){let e=c(3);D(e.dataSource==null?null:e.dataSource.links)}}function be(i,r){if(i&1&&(a(0,"div",23)(1,"table",24)(2,"thead",25)(3,"tr")(4,"th",22),d(5,"#"),o(),a(6,"th",22),d(7,"Image"),o(),a(8,"th",22),d(9,"Title"),o(),a(10,"th",22),d(11,"Extension"),o(),a(12,"th",22),d(13,"Action"),o()()(),a(14,"tbody",25),_(15,xe,2,0),o()(),a(16,"div",26)(17,"ul",27),_(18,Fe,2,0),o()()()),i&2){let e=c(2);s(15),m(e.dataSource?15:-1),s(3),m(e.dataSource.links?18:-1)}}function Se(i,r){if(i&1){let e=v();a(0,"div",18)(1,"div",19)(2,"p"),d(3),o()(),a(4,"div",20)(5,"input",21),p("keypress",function(n){h(e);let l=c();return C(l.handleSearch(n))}),o()()(),_(6,pe,2,0,"p",22)(7,be,19,2,"div",23)}if(i&2){let e,t=c();s(3),Q("Showing ",(e=t.dataSource==null?null:t.dataSource.from)!==null&&e!==void 0?e:0," to ",(e=t.dataSource==null?null:t.dataSource.to)!==null&&e!==void 0?e:0," of ",(e=t.dataSource==null?null:t.dataSource.total)!==null&&e!==void 0?e:0," entries"),s(3),m(t.loader==!0?6:7)}}var De=(()=>{let r=class r{constructor(t,n,l,g){this.notification=t,this.myFormService=n,this.lang=l,this.service=g,this.apiUrl=q.apiUrl,this.search="",this.fileDropdown=!1,this.loader=!1,this.files=[],this.dataSource={},this.options={type:"",page:1,limit:10,search:""}}ngOnInit(){this.getFiles()}handleSearch(t){let n=t.target.value;this.options.search=n,this.getFiles()}getFiles(){this.loader=!0,this.service.list(this.options).subscribe({next:t=>{this.dataSource=t.data,this.loader=!1},error:t=>{this.loader=!1}})}handlePage(t){this.options.page=t,this.getFiles()}handle_fileDropdown(){this.fileDropdown=!this.fileDropdown}delete(t){this.service.delete(t).subscribe({next:n=>{this.notification.success(n.message),this.loader=!1,this.getFiles()},error:n=>{let l=n.error;l?l.errors?this.notification.error(Object.values(l.errors)[0]):this.notification.error(l.message):this.notification.error("Something Went Wrong"),this.loader=!1}})}onEdit(t){this.FileModalComponent.modal=!0,this.FileModalComponent.is_edit=!0,this.FileModalComponent.filename=t.name,this.FileModalComponent.file={name:t.name,size:t.size,extension:t.extension,type:t.type,url:t.link,id:t.id}}};r.\u0275fac=function(n){return new(n||r)(x(T),x(P),x(k),x(O))},r.\u0275cmp=b({type:r,selectors:[["app-filemanager"]],viewQuery:function(n,l){if(n&1&&$(z,5),n&2){let g;R(g=A())&&(l.FileModalComponent=g.first)}},standalone:!0,features:[y],decls:22,vars:2,consts:[[1,"row","page-titles"],[1,"col-md-5","align-self-center"],[1,"text-themecolor"],[1,"col-md-7","align-self-center","text-end"],[1,"d-flex","justify-content-end","align-items-center"],[1,"breadcrumb","justify-content-end"],[1,"breadcrumb-item"],["href","javascript:void(0)"],[1,"breadcrumb-item","active"],[3,"getFiles"],[1,"row"],[1,"col-lg-12"],[1,"card"],[1,"card-header","bg-info","d-flex","justify-content-between","justify-content-center","align-items-center"],[1,"mb-0","text-white"],[1,"btn","btn-primary"],[1,"card-body","p-4"],[1,"btn","btn-primary",3,"click"],[1,"d-flex","justify-content-between","pb-3"],[1,"text-end"],[1,"d-flex","justify-content-center","align-items-center"],["id","search","placeholder","Search",1,"form-control",3,"keypress"],[1,"text-center"],[1,"table-responsive"],[1,"table","border","table-striped"],[1,"text-nowrap","text-truncate"],["id","example23_paginate",1,"dataTables_paginate","paging_simple_numbers","pt-3"],[1,"pagination",2,"justify-content","center"],[2,"width","50px","height","50px",3,"src"],[1,"bt-group"],["title","Edit",1,"btn","btn-info","text-white"],["title","Delete",1,"btn","btn-danger","text-white"],["title","Edit",1,"btn","btn-info","text-white",3,"click"],[1,"icon","mdi","mdi-grease-pencil"],["title","Delete",1,"btn","btn-danger","text-white",3,"click"],[1,"icon","mdi","mdi-delete"],[1,"paginate_button","page-item"],[1,"page-link",3,"click","ngClass"]],template:function(n,l){n&1&&(a(0,"div",0)(1,"div",1)(2,"h4",2),d(3,"Filemanager"),o()(),a(4,"div",3)(5,"div",4)(6,"ol",5)(7,"li",6)(8,"a",7),d(9,"Admin"),o()(),a(10,"li",8),d(11,"Filemanager"),o()()()()(),a(12,"app-file-modal",9),p("getFiles",function(){return l.getFiles()}),o(),a(13,"div",10)(14,"div",11)(15,"div",12)(16,"div",13)(17,"h4",14),d(18,"Filemanager"),o(),_(19,_e,2,0,"a",15),o(),a(20,"div",16),_(21,Se,8,4),o()()()()),n&2&&(s(19),m(l.service.adminService.p.includes("filemanager.add")?19:-1),s(2),m(l.service.adminService.p.includes("filemanager.list")?21:-1))},dependencies:[M,E,j,V,z],styles:[".img_holder[_ngcontent-%COMP%]{height:200px;width:200px}.dropdown[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{right:0}.el-overlay-1[_ngcontent-%COMP%]{position:relative}.el-overlay-1[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:250px}.el-overlay[_ngcontent-%COMP%]{width:100%;height:100%;position:absolute;overflow:hidden;top:0;left:0;opacity:0;background-color:#000000b3;-webkit-transition:all .4s ease-in-out;transition:all .4s ease-in-out}.el-overlay[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{color:#fff;list-style:none;height:100%;display:flex;align-items:center;justify-content:center;padding:0;margin:0}.el-overlay[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff}.el-card-avatar[_ngcontent-%COMP%]:hover   .el-overlay[_ngcontent-%COMP%]{opacity:1}",`.paginate_button[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{
      background-color: #03a9f3;
      color: white;
    }`]});let i=r;return i})();export{De as FilemanagerComponent};
