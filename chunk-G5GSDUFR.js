import{a as k}from"./chunk-HYZ7TAPG.js";import"./chunk-DQEL3O4A.js";import{a as P}from"./chunk-SEDRWCLH.js";import"./chunk-AEXCO4TQ.js";import{a as j,b as p,c as w,d as V,f as H,g as R,h as A,l as W,m as G,n as q}from"./chunk-NHQLDB4D.js";import{a as O}from"./chunk-CFZ55GJT.js";import"./chunk-YBORAQIT.js";import{a as N}from"./chunk-CBRMUCHM.js";import{e as M}from"./chunk-Q4C2MDTB.js";import{c as C,e as I,h as F,q as L,s as D,y as T}from"./chunk-JYBOTQM5.js";import{La as i,Ma as u,W as S,Ya as v,_a as c,eb as n,fb as t,gb as _,kb as y,lb as g,qb as a,sb as l,xb as x,zb as b}from"./chunk-BCCWPBFH.js";import{d as E}from"./chunk-4CLCTAJ7.js";var B=o=>({"d-none":o});function K(o,d){if(o&1&&(n(0,"div",32),a(1),t()),o&2){let r=g();i(),l(" ",r.myFormService.getErrorMessage(r.form.controls.title)," ")}}function Q(o,d){if(o&1&&(n(0,"div",32),a(1),t()),o&2){let r=g();i(),l(" ",r.myFormService.getErrorMessage(r.form.controls.pdf)," ")}}function X(o,d){if(o&1&&(n(0,"div",32),a(1),t()),o&2){let r=g();i(),l(" ",r.myFormService.getErrorMessage(r.form.controls.country)," ")}}function Y(o,d){if(o&1&&(n(0,"div",32),a(1),t()),o&2){let r=g();i(),l(" ",r.myFormService.getErrorMessage(r.form.controls.topic)," ")}}function Z(o,d){if(o&1&&(n(0,"div",32),a(1),t()),o&2){let r=g();i(),l(" ",r.myFormService.getErrorMessage(r.form.controls.created_at)," ")}}function $(o,d){if(o&1&&(n(0,"div",32),a(1),t()),o&2){let r=g();i(),l(" ",r.myFormService.getErrorMessage(r.form.controls.language)," ")}}function ee(o,d){if(o&1&&(n(0,"div",32),a(1),t()),o&2){let r=g();i(),l(" ",r.myFormService.getErrorMessage(r.form.controls.thumbnail)," ")}}function te(o,d){if(o&1&&(n(0,"div",32),a(1),t()),o&2){let r=g();i(),l(" ",r.myFormService.getErrorMessage(r.form.controls.short_description)," ")}}var ge=(()=>{let d=class d{constructor(s,m,e,h,f,U,z,J){this.fb=s,this.notification=m,this.myFormService=e,this.service=h,this.route=f,this.router=U,this.lang=z,this.websiteService=J,this.default="",this.formLoader=!1,this.editId="",this.form=this.fb.group({title:["",[p.required,p.maxLength(500)]],pdf:["",[p.maxLength(200)]],country:["",[p.maxLength(100)]],topic:["",[p.maxLength(100)]],language:["",[p.maxLength(100)]],short_description:["",[p.maxLength(500)]],thumbnail:["",p.required],created_at:["",p.required]})}ngOnInit(){this.route.paramMap.subscribe(s=>{this.editId=s.get("id"),this.getRecord(this.editId)})}getRecord(s){return E(this,null,function*(){this.formLoader=!0,this.service.list({type:"document",id:Number(this.editId),limit:1}).subscribe({next:m=>{let e=m.data.data[0];e&&(this.form.patchValue({title:e.title,pdf:e.pdf,country:e.country,topic:e.topic,short_description:e.short_description,thumbnail:e.thumbnail,created_at:e.date,language:e.language}),this.default=e.long_description),this.notification.success(m.message),this.formLoader=!1},error:m=>{let e=m.error;e?e.errors?this.notification.error(Object.values(e.errors)[0]):this.notification.error(e.message):this.notification.error("Something Went Wrong"),this.formLoader=!1}})})}onSubmit(){return E(this,null,function*(){if(this.form.valid){let s=this.form.value;s.type="document",s.id=this.editId,this.formLoader=!0,this.service.update(s).subscribe({next:m=>{this.formLoader=!1,this.notification.success(m.message),this.getRecord(this.editId),this.formLoader=!1},error:m=>{let e=m.error;e?e.errors?this.notification.error(Object.values(e.errors)[0]):this.notification.error(e.message):this.notification.error("Something Went Wrong"),this.formLoader=!1}})}else this.formLoader=!1,this.form.markAllAsTouched(),this.notification.error("Validation Failed")})}};d.\u0275fac=function(m){return new(m||d)(u(W),u(T),u(k),u(O),u(L),u(D),u(M),u(N))},d.\u0275cmp=S({type:d,selectors:[["app-document-edit"]],standalone:!0,features:[x],decls:74,vars:26,consts:[[1,"row","page-titles"],[1,"col-md-5","align-self-center"],[1,"text-themecolor"],[1,"col-md-7","align-self-center","text-end"],[1,"d-flex","justify-content-end","align-items-center"],[1,"breadcrumb","justify-content-end"],[1,"breadcrumb-item"],["href","javascript:void(0)"],[1,"breadcrumb-item","active"],[1,"row"],[1,"col-lg-12"],[1,"card"],[1,"card-header","bg-info"],[1,"mb-0","text-white"],[1,"card-body"],[1,"text-center",3,"ngClass"],[3,"ngSubmit","ngClass","formGroup"],[1,"row","pt-3"],[1,"col-md-6"],[1,"form-group"],[1,"form-label"],["formControlName","title","placeholder","Title",1,"form-control"],["class","text-danger",4,"ngIf"],[3,"imgHanle","image"],["formControlName","country","placeholder","Country",1,"form-control"],["formControlName","topic","placeholder","Topic",1,"form-control"],["type","date","formControlName","created_at","placeholder","Created at",1,"form-control"],["type","text","formControlName","language","placeholder","Language",1,"form-control"],[1,"col-md-12"],["formControlName","short_description","placeholder","Short Description",1,"form-control"],[1,"col-md-12","text-center"],["type","submit",1,"btn","btn-info","text-white",3,"disabled"],[1,"text-danger"]],template:function(m,e){if(m&1&&(n(0,"div",0)(1,"div",1)(2,"h4",2),a(3,"Edit Document"),t()(),n(4,"div",3)(5,"div",4)(6,"ol",5)(7,"li",6)(8,"a",7),a(9,"Home"),t()(),n(10,"li",8),a(11,"Document"),t()()()()(),n(12,"div",9)(13,"div",10)(14,"div",11)(15,"div",12)(16,"h4",13),a(17,"Edit Document Form"),t()(),n(18,"div",14)(19,"p",15),a(20,"Loader"),t(),n(21,"form",16),y("ngSubmit",function(){return e.onSubmit()}),n(22,"div",17)(23,"div",18)(24,"div",19)(25,"label",20),a(26),t(),_(27,"input",21),v(28,K,2,1,"div",22),t()(),n(29,"div",18)(30,"div",19)(31,"label",20),a(32),t(),n(33,"app-img-uploader",23),y("imgHanle",function(f){return e.form.controls.pdf.patchValue(f.path)}),t(),v(34,Q,2,1,"div",22),t()(),n(35,"div",18)(36,"div",19)(37,"label",20),a(38),t(),_(39,"input",24),v(40,X,2,1,"div",22),t()(),n(41,"div",18)(42,"div",19)(43,"label",20),a(44),t(),_(45,"input",25),v(46,Y,2,1,"div",22),t()(),n(47,"div",18)(48,"div",19)(49,"label",20),a(50),t(),_(51,"input",26),v(52,Z,2,1,"div",22),t()(),n(53,"div",18)(54,"div",19)(55,"label",20),a(56),t(),_(57,"input",27),v(58,$,2,1,"div",22),t()(),n(59,"div",18)(60,"div",19)(61,"label",20),a(62),t(),n(63,"app-img-uploader",23),y("imgHanle",function(f){return e.form.controls.thumbnail.patchValue(f.path)}),t(),v(64,ee,2,1,"div",22),t()(),n(65,"div",28)(66,"div",19)(67,"label",20),a(68),t(),_(69,"input",29),v(70,te,2,1,"div",22),t()(),n(71,"div",30)(72,"button",31),a(73,"Submit"),t()()()()()()()()),m&2){let h,f;i(19),c("ngClass",b(22,B,!e.formLoader)),i(2),c("ngClass",b(24,B,e.formLoader))("formGroup",e.form),i(5),l("Title (",e.lang.lang,")"),i(2),c("ngIf",e.form.controls.title.invalid&&(e.form.controls.title.dirty||e.form.controls.title.touched)),i(4),l("PDF (",e.lang.lang,")"),i(),c("image",(h=e.form.controls.pdf.value)!==null&&h!==void 0?h:""),i(),c("ngIf",e.form.controls.pdf.invalid&&(e.form.controls.pdf.dirty||e.form.controls.pdf.touched)),i(4),l("Country (",e.lang.lang,")"),i(2),c("ngIf",e.form.controls.country.invalid&&(e.form.controls.country.dirty||e.form.controls.country.touched)),i(4),l("Topic (",e.lang.lang,")"),i(2),c("ngIf",e.form.controls.topic.invalid&&(e.form.controls.topic.dirty||e.form.controls.topic.touched)),i(4),l("Created At (",e.lang.lang,")"),i(2),c("ngIf",e.form.controls.created_at.invalid&&(e.form.controls.created_at.dirty||e.form.controls.created_at.touched)),i(4),l("Language (",e.lang.lang,")"),i(2),c("ngIf",e.form.controls.language.invalid&&(e.form.controls.language.dirty||e.form.controls.language.touched)),i(4),l("Thumbnail (",e.lang.lang,")"),i(),c("image",(f=e.form.controls.thumbnail.value)!==null&&f!==void 0?f:""),i(),c("ngIf",e.form.controls.thumbnail.invalid&&(e.form.controls.thumbnail.dirty||e.form.controls.thumbnail.touched)),i(4),l("Short Description (",e.lang.lang,")"),i(2),c("ngIf",e.form.controls.short_description.invalid&&(e.form.controls.short_description.dirty||e.form.controls.short_description.touched)),i(2),c("disabled",e.formLoader)}},dependencies:[F,C,I,q,H,j,w,V,R,A,G,P],encapsulation:2});let o=d;return o})();export{ge as DocumentEditComponent};
