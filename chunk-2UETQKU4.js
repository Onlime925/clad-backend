import{a as L}from"./chunk-NO2SZDQP.js";import{a as F}from"./chunk-FXNDTBXR.js";import"./chunk-NHWQ7PR2.js";import{c as T,h as j,s as I,x as V}from"./chunk-QUG5WU3S.js";import{$a as _,La as c,Ma as p,W as S,Xa as m,Za as w,ab as b,bb as g,cb as v,db as n,ea as x,eb as o,fa as f,fb as E,ib as C,jb as h,kb as d,pb as l,qb as u,tb as y,wb as N,yb as k}from"./chunk-CWCG2WSJ.js";import"./chunk-4CLCTAJ7.js";var A=(t,r)=>r.id,M=t=>({active:t});function W(t,r){t&1&&(n(0,"td",23),l(1,"Loading"),o())}function $(t,r){if(t&1){let e=C();n(0,"a",29),h("click",function(){x(e);let a=d().$implicit,s=d(4);return f(s.onDelete(a.id))}),E(1,"i",30),o()}}function O(t,r){if(t&1&&(n(0,"tr")(1,"td",22),l(2),o(),n(3,"td",22),l(4),o(),n(5,"td",22),l(6),o(),n(7,"td",26)(8,"div",27),m(9,$,2,0,"a",28),o()()()),t&2){let e=r.$implicit,i=d(4);c(2),u(e.id),c(2),u(e.name),c(2),u(e.email),c(3),_(i.admin.p.includes("newsletter.delete")?9:-1)}}function P(t,r){if(t&1&&g(0,O,10,4,"tr",null,A),t&2){let e=d(3);v(e.dataSource==null?null:e.dataSource.data)}}function R(t,r){if(t&1&&m(0,P,2,0),t&2){let e=d(2);_(e.dataSource!=null&&e.dataSource.data?0:-1)}}function B(t,r){if(t&1){let e=C();n(0,"li",31)(1,"button",32),h("click",function(){let a=x(e).$implicit,s=d(3);return f(s.handlePage(a))}),l(2),o()()}if(t&2){let e=r.$implicit,i=d(3);c(),w("ngClass",k(2,M,e==i.options.page)),c(),u(e)}}function H(t,r){if(t&1&&g(0,B,3,4,"li",31,b),t&2){let e=d(2);v(e.dataSource==null?null:e.dataSource.links)}}function q(t,r){if(t&1){let e=C();n(0,"div",15)(1,"div",16)(2,"p"),l(3),o()(),n(4,"div",17)(5,"input",18),h("keypress",function(a){x(e);let s=d();return f(s.handleSearch(a))}),o()()(),n(6,"div",19)(7,"table",20)(8,"thead",21)(9,"tr")(10,"th",22),l(11,"#"),o(),n(12,"th",22),l(13,"Name"),o(),n(14,"th",22),l(15,"Email"),o(),n(16,"th",22),l(17,"Action"),o()()(),n(18,"tbody",21),m(19,W,2,0,"td",23)(20,R,1,1),o()(),n(21,"div",24)(22,"ul",25),m(23,H,2,0),o()()()}if(t&2){let e,i=d();c(3),y("Showing ",(e=i.dataSource==null?null:i.dataSource.from)!==null&&e!==void 0?e:0," to ",(e=i.dataSource==null?null:i.dataSource.to)!==null&&e!==void 0?e:0," of ",(e=i.dataSource==null?null:i.dataSource.total)!==null&&e!==void 0?e:0," entries"),c(16),_(i.loader?19:20),c(4),_(i.dataSource.links?23:-1)}}var Y=(()=>{let r=class r{constructor(i,a,s,D){this.service=i,this.admin=a,this.notification=s,this.router=D,this.loader=!1,this.dataSource={},this.options={search:"",page:1,limit:10},this.getList()}ngOnInit(){this.getList()}ngAfterViewInit(){this.getList()}getList(){this.loader=!0,this.service.newsletter_list(this.options).subscribe({next:i=>{this.dataSource=i.data,this.loader=!1},error:i=>{this.notification.error("Something Went Wrong"),this.loader=!1}})}handleSearch(i){let a=i.target;this.options.search=a.value,this.getList()}handlePage(i){this.options.page=i,this.getList()}onDelete(i){this.loader=!0,this.service.newsletter_remove({id:i}).subscribe({next:a=>{this.notification.success(a.message),this.getList()},error:a=>{let s=a.error;s?s.errors?this.notification.error(Object.values(s.errors)[0]):this.notification.error(s.message):this.notification.error("Something Went Wrong"),this.loader=!1}})}};r.\u0275fac=function(a){return new(a||r)(p(F),p(L),p(V),p(I))},r.\u0275cmp=S({type:r,selectors:[["app-newsletters"]],standalone:!0,features:[N],decls:20,vars:1,consts:[[1,"row","page-titles"],[1,"col-md-5","align-self-center"],[1,"text-themecolor"],[1,"col-md-7","align-self-center","text-end"],[1,"d-flex","justify-content-end","align-items-center"],[1,"breadcrumb","justify-content-end"],[1,"breadcrumb-item"],["href","javascript:void(0)"],[1,"breadcrumb-item","active"],[1,"row"],[1,"col-lg-12"],[1,"card"],[1,"card-header","bg-info","d-flex","justify-content-between","justify-content-center","align-items-center"],[1,"mb-0","text-white"],[1,"card-body","p-4"],[1,"d-flex","justify-content-between","pb-3"],[1,"text-end"],[1,"d-flex","justify-content-center","align-items-center"],["id","search","placeholder","Search",1,"form-control",3,"keypress"],[1,"table-responsive"],[1,"table","border","table-striped"],[1,"text-nowrap","text-truncate"],[1,"text-center"],["colspan","5",1,"text-center"],["id","example23_paginate",1,"dataTables_paginate","paging_simple_numbers","pt-3"],[1,"pagination",2,"justify-content","center"],[1,"text-center","text-nowrap"],[1,"bt-group"],["title","Delete",1,"btn","btn-danger","text-white"],["title","Delete",1,"btn","btn-danger","text-white",3,"click"],[1,"icon","mdi","mdi-delete"],[1,"paginate_button","page-item"],[1,"page-link",3,"click","ngClass"]],template:function(a,s){a&1&&(n(0,"div",0)(1,"div",1)(2,"h4",2),l(3,"All Newsletters"),o()(),n(4,"div",3)(5,"div",4)(6,"ol",5)(7,"li",6)(8,"a",7),l(9,"Home"),o()(),n(10,"li",8),l(11,"Newsletters"),o()()()()(),n(12,"div",9)(13,"div",10)(14,"div",11)(15,"div",12)(16,"h4",13),l(17,"All Newsletters List"),o()(),n(18,"div",14),m(19,q,24,5),o()()()()),a&2&&(c(19),_(s.admin.p.includes("newsletter.list")?19:-1))},dependencies:[j,T],styles:[`.paginate_button[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{
      background-color: #03a9f3;
      color: white;
    }`]});let t=r;return t})();export{Y as NewslettersComponent};
